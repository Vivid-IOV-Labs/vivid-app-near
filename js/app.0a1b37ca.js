(function(e){function t(t){for(var o,r,s=t[0],c=t[1],l=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==a[c]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={app:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/vivid-app-near/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),a=n.n(o);a.a},"0826":function(e,t,n){},"08e4":function(e,t,n){"use strict";var o=n("5fcd"),a=n.n(o);a.a},"12a1":function(e,t,n){},"22a6":function(e,t,n){e.exports=n.p+"img/Vivid_logo design2020-05.fc1a00c6.png"},"2bb3":function(e,t,n){e.exports=n.p+"img/profile_pic.5b44bf1d.png"},"3bd0":function(e,t,n){"use strict";var o=n("a303"),a=n.n(o);a.a},"3dcd":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("534e"),n("f89d");var o=n("2b0e"),a=n("b29a"),i=n.n(a),r=n("2f62");o["a"].use(r["a"]);var s=new r["a"].Store({state:{inBuiltRequestDemo:!0},mutations:{setInBuiltRequestDemo:function(e,t){e.inBuiltRequestDemo=t}},getters:{isInBuiltRequestDemo:function(e){return e.inBuiltRequestDemo}}}),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-navigator",{attrs:{swipeable:"","page-stack":e.pageStack},on:{"push-page":function(t){return e.pageStack.push(t)},"back-page":function(t){return e.pageStack.pop()},"reset-home-page":function(t){e.pageStack.pop(),e.pageStack.push(t)}}})},l=[],d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{attrs:{id:"loginPage"}},[n("div",{attrs:{id:"loginContainer"}},[n("h1",{attrs:{id:"appHeading"}},[e._v("VIVID")]),n("h2",{attrs:{id:"appSubHeading"}},[e._v("On Demand Live Streaming")]),n("v-ons-button",{attrs:{id:"loginButton"},on:{click:e.loginUser}},[e._v(e._s("Login"))]),n("span",{attrs:{id:"authenticationNote"}},[e._v(e._s("On Near Platform"))])],1)])},u=[],p=(n("96cf"),n("1da1")),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-button",{staticStyle:{"background-color":"Transparent"}},[n("ons-icon",{staticStyle:{color:"#1d1d1b"},attrs:{size:"12px",icon:"fa-bars"}})],1)],1),n("div",{staticClass:"center"},[n("v-ons-segment",{staticStyle:{width:"8em"},attrs:{"tabbar-id":"homeTabbar",index:e.segmentIndex},on:{"update:index":function(t){e.segmentIndex=t}}},[n("button",[e._v("Wallet")]),n("button",[e._v("Request")])])],1),n("div",{staticClass:"right"},[n("v-ons-button",{staticStyle:{"background-color":"Transparent"},on:{click:e.pushToFilterStreamPage}},[n("ons-icon",{staticStyle:{color:"#1d1d1b"},attrs:{size:"12px",icon:"fa-filter"}})],1)],1)]),n("v-ons-tabbar",{attrs:{id:"homeTabbar",tabs:e.tabs,index:e.tabbarIndex},on:{"update:index":function(t){e.tabbarIndex=t},"push-page":e.pushToViewStreamPage,"back-page":e.popViewPage,postchange:e.reHydrate}})],1)},f=[],g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-ons-page",{attrs:{id:"requestStreamPage"}},[o("v-ons-list",[o("v-ons-list-item",{attrs:{id:"optionsPanel_section",expandable:"",expanded:e.optionsPanelView},on:{"update:expanded":function(t){e.optionsPanelView=t}}},[o("span",{attrs:{id:"optionsPanel_section_title"}},[e._v("request options")]),o("div",{staticClass:"expandable-content"},[o("div",{attrs:{id:"options_panel"}},[o("v-ons-row",[o("v-ons-col",[o("span",{staticClass:"optionsPanelRowTitle"},[e._v("Tags:")]),o("span",{staticClass:"badge badge-pill badge-primary optionsPanelRow"},[e._v("Street View")])])],1),o("v-ons-row",[o("v-ons-col",[o("span",{staticClass:"optionsPanelRowTitle"},[e._v("Will Accept:")]),o("span",{staticClass:"optionsPanelRow"},[e._v("Side view of santa parade")])])],1),o("v-ons-row",[o("v-ons-col",[o("span",{staticClass:"optionsPanelRowTitle"},[e._v("Tip Offered:")]),o("span",{staticClass:"optionsPanelRow"},[e._v("NEAR 0.05/min")])])],1),o("v-ons-row",[o("v-ons-col",[o("span",{staticClass:"optionsPanelRowTitle"},[e._v("Range:")]),o("v-ons-range",{attrs:{size:"0.813em"}})],1)],1)],1)])])],1),o("img",{attrs:{id:"vivid_logo",src:n("22a6")}}),o("div",{staticClass:"map",attrs:{id:"map"}}),o("section",{attrs:{id:"nav_buttons"}},[o("v-ons-list"),o("div",{attrs:{id:"pushToViewStreamPageButton"}},[o("v-ons-button",{on:{click:function(t){return e.fromRequest()}}},[e._v("Send Video Request")])],1)],1)],1)},h=[],b=(n("99af"),n("d81d"),n("5530")),v=(n("6cc5"),n("ef9d"),n("e11e")),w=(n("c293"),n("c6e0")),y=new w["EsriProvider"],S={name:"requestStream",data:function(){return{map:null,tileLayer:null,layers:[],options:{enableHighAccuracy:!0,timeout:5e3,maximumAge:0},myLocation:null,myLocationCircle:null,geoSearchLocation:null,geoSearchLocationCircle:null,defaultRadius:92,optionsPanelView:!0,streamerIcon:null,redMarker:null,buttonGo:null,slimPinIcon:null,purpleStreamerIcon:null,templateForm:null}},methods:Object(b["a"])({},Object(r["c"])({_setInBuiltRequestDemo:"setInBuiltRequestDemo"}),{layerClickHandler:function(e){var t=e.target;Object.prototype.hasOwnProperty.call(t,"_popup")&&t.unbindPopup(),t.bindPopup(this.templateForm),t.openPopup();var n=v["DomUtil"].get("button-submit");console.log(n),v["DomEvent"].addListener(n,"click",(function(){console.log("button clicked to submit")}))},fromJoin:function(){this._setInBuiltRequestDemo(!0),this.pushToViewStreamPage()},fromRequest:function(){this._setInBuiltRequestDemo(!1),this.pushToViewStreamPage()},pushToViewStreamPage:function(){this.$emit("push-page")},addIDEALondonMarker:function(){var e=this;v["marker"]([51.520748,-.08504],{icon:this.purpleStreamerIcon}).addTo(this.map).bindPopup(this.templateForm,{maxWidth:1060}).on("popupopen",(function(){document.getElementById("button-submit").addEventListener("click",(function(){e.fromJoin()}))})).on("popupclose",(function(){})).openPopup(),v["circle"]([51.520748,-.08504],this.defaultRadius).addTo(this.map),this.map.setView([51.520748,-.08504],15)},geoSearchEvent:function(e){this.myLocation&&this.map.removeLayer(this.myLocation),this.myLocationCircle&&this.map.removeLayer(this.myLocationCircle),this.geoSearchLocation&&this.map.removeLayer(this.geoSearchLocation),this.geoSearchLocationCircle&&this.map.removeLayer(this.geoSearchLocationCircle),this.addIDEALondonMarker(),this.geoSearchLocation=v["marker"]([e.location.y,e.location.x],{icon:this.slimPinIcon}).addTo(this.map).bindPopup(e.location.label).openPopup(),this.geoSearchLocationCircle=v["circle"]([e.location.y,e.location.x],this.defaultRadius).addTo(this.map),this.map.setView([e.location.y,e.location.x],15)},onLocationFound:function(e){var t=e.accuracy,o=v["icon"]({iconUrl:n("2bb3"),iconSize:[38,95],iconAnchor:[28,40],popupAnchor:[-1,-36],className:"profilePic"});this.myLocation=v["marker"](e.latlng,{icon:o}).addTo(this.map).bindPopup("You are here").openPopup(),this.myLocationCircle=v["circle"](e.latlng,t).addTo(this.map)},onLocationError:function(e){this.$ons.notification.alert(e.message),this.map.setView([51.520748,-.08504],15)},initMap:function(){this.map=v["map"]("map").setView([51.520748,-.08504],15),new w["GeoSearchControl"]({provider:y,showMarker:!0,showPopup:!1,marker:{icon:new v["Icon"].Default,draggable:!1},maxMarkers:1,retainZoomLevel:!1,animateZoom:!0,autoClose:!0,searchLabel:"Enter address",keepResult:!1}).addTo(this.map),this.map.on("geosearch/showlocation",this.geoSearchEvent),document.getElementById("optionsPanel_section").showExpansion()},initLayers:function(){this.tileLayer=v["tileLayer"]("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWEwNnJpaSIsImEiOiJjazZkeTU2NnAxbWF4M2xxajN6NWIyb2l6In0.4iTjEpS8cIa_Um3zhE9keQ",{attribution:!1,maxZoom:36,id:"mapbox/streets-v11"}).addTo(this.map)},locationSuccess:function(e){var t=e.coords;console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))},locationError:function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))}}),mounted:function(){this.templateForm='<v-ons-button id="button-submit" type="button">Join</v-ons-button>',this.initMap(),this.initLayers(),this.slimPinIcon=v["icon"]({iconUrl:n("a8c8"),iconSize:[28,85],iconAnchor:[13,63],className:"slimPinIcon",popupAnchor:[0,-60]}),this.purpleStreamerIcon=v["icon"]({iconUrl:n("7280"),iconSize:[28,85],iconAnchor:[30,52],className:"purpleStreamerIcon",popupAnchor:[-3,-46]}),this.addIDEALondonMarker(),this.map.on("locationfound",this.onLocationFound),this.map.on("locationerror",this.onLocationError)}},k=S,C=(n("63bf"),n("2877")),_=Object(C["a"])(k,g,h,!1,null,"518fe028",null),A=_.exports,P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{attrs:{id:"walletPage"}},[n("v-ons-card",{staticStyle:{"text-align":"center"}},[n("div",{staticClass:"title"},[e._v("Balance")]),n("div",{staticClass:"content"},[n("strong",[n("span",[e._v(e._s("NEAR "+parseFloat(e.walletService()).toFixed(2)))])])])]),n("section",{staticStyle:{"text-align":"center"},attrs:{id:"wallet_transaction_buttons"}},[n("div",{staticStyle:{display:"block"}},[n("v-ons-button",{staticStyle:{"margin-top":"1em","margin-right":"2em",width:"5em","background-color":"indigo"}},[e._v("Send")]),n("v-ons-button",{staticStyle:{"margin-top":"1em","margin-left":"2em",width:"5em","background-color":"indigo"}},[e._v("Receive")])],1)])],1)},x=[],I={name:"wallet",inject:["walletService"],data:function(){return{}}},E=I,T=(n("89ff"),Object(C["a"])(E,P,x,!1,null,"91d4ba60",null)),O=T.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{attrs:{id:"requestStreamFiltersPage"}},[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button")],1),n("div",{staticClass:"center"},[n("span",{staticClass:"badge badge-default onsPageTitleStyle"},[e._v("Request Options")])])]),n("v-ons-list",[n("v-ons-list-item",{attrs:{id:"tags_panel",expandable:"",expanded:e.tagsPanelView},on:{"update:expanded":function(t){e.tagsPanelView=t},click:function(t){return e.togglePanel("tags_panel")}}},[n("span",{attrs:{id:"expandable_section_title"}},[e._v("tags")]),n("div",{staticClass:"expandable-content"},e._l(e.tagOptions,(function(t,o){return n("v-ons-list-item",{key:t,attrs:{tappable:""}},[n("label",{staticClass:"left"},[n("v-ons-checkbox",{attrs:{"input-id":"checkbox-"+o,value:t},model:{value:e.tagOptionsChecked,callback:function(t){e.tagOptionsChecked=t},expression:"tagOptionsChecked"}})],1),n("label",{staticClass:"center",attrs:{for:"checkbox-"+o}},[e._v(e._s(t))])])})),1)])],1),n("v-ons-list",[n("v-ons-list-item",{attrs:{id:"willAccept_panel",expandable:"",expanded:e.willAcceptPanelView},on:{"update:expanded":function(t){e.willAcceptPanelView=t},click:function(t){return e.togglePanel("willAccept_panel")}}},[n("span",{attrs:{id:"expandable_section_title"}},[e._v("will accept")]),n("div",{staticClass:"expandable-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.willAcceptPanelText,expression:"willAcceptPanelText"}],staticClass:"textarea textarea--transparent",attrs:{maxlength:"140",rows:"6",placeholder:"Input message"},domProps:{value:e.willAcceptPanelText},on:{input:function(t){t.target.composing||(e.willAcceptPanelText=t.target.value)}}})])])],1),n("v-ons-list",[n("v-ons-list-item",{attrs:{id:"tipOffered_panel",expandable:"",expanded:e.tipOfferedView},on:{"update:expanded":function(t){e.tipOfferedView=t},click:function(t){return e.togglePanel("tipOffered_panel")}}},[n("span",{attrs:{id:"expandable_section_title"}},[e._v("tip offered")]),n("div",{staticClass:"expandable-content"},[n("v-ons-input",{attrs:{type:"number",placeholder:"Amount per minute",float:""},model:{value:e.tipOfferedAmount,callback:function(t){e.tipOfferedAmount=t},expression:"tipOfferedAmount"}})],1)])],1),n("v-ons-list",[n("v-ons-list-item",{attrs:{id:"currencyView_panel",expandable:"",expanded:e.currencyView},on:{"update:expanded":function(t){e.currencyView=t},click:function(t){return e.togglePanel("currencyView_panel")}}},[n("span",{attrs:{id:"expandable_section_title"}},[e._v("currency")]),n("div",{staticClass:"expandable-content"},[n("v-ons-list",e._l(e.currencyTickers,(function(t,o){return n("v-ons-list-item",{key:t,attrs:{tappable:""}},[n("label",{staticClass:"left"},[n("v-ons-radio",{attrs:{"input-id":"radio-"+o,value:t},model:{value:e.currencyTickerSelected,callback:function(t){e.currencyTickerSelected=t},expression:" currencyTickerSelected"}})],1),n("label",{staticClass:"center",attrs:{for:"radio-"+o}},[e._v(e._s(t))])])})),1)],1)])],1)],1)},R=[],N={name:"requestStreamFilters",data:function(){return{tagsPanelView:!1,tagOptions:["Street View","Crowds","Buildings"],tagOptionsChecked:["Street View"],willAcceptPanelView:!1,willAcceptPanelText:"Side view of santa parade",acceptanceDescription:"",tipOfferedView:!1,tipOfferedAmount:.05,currencyView:!1,currencyTickers:["USD","GBP","NEAR"],currencyTickerSelected:"NEAR"}},methods:{togglePanel:function(e){switch(!0){case"tags_panel"==e:this.tipOfferedView&&document.getElementById("tipOffered_panel").hideExpansion(),this.tipOfferedView=!1,this.currencyView&&document.getElementById("currencyView_panel").hideExpansion(),this.currencyView=!1,this.willAcceptPanelView&&document.getElementById("willAccept_panel").hideExpansion(),this.willAcceptPanelView=!1;break;case"willAccept_panel"==e:this.tipOfferedView&&document.getElementById("tipOffered_panel").hideExpansion(),this.tipOfferedView=!1,this.currencyView&&document.getElementById("currencyView_panel").hideExpansion(),this.currencyView=!1,this.tagsPanelView&&document.getElementById("tags_panel").hideExpansion(),this.tagsPanelView=!1;break;case"tipOffered_panel"==e:this.willAcceptPanelView&&document.getElementById("willAccept_panel").hideExpansion(),this.willAcceptPanelView=!1,this.currencyView&&document.getElementById("currencyView_panel").hideExpansion(),this.currencyView=!1,this.tagsPanelView&&document.getElementById("tags_panel").hideExpansion(),this.tagsPanelView=!1;break;case"currencyView_panel"==e:this.willAcceptPanelView&&document.getElementById("willAccept_panel").hideExpansion(),this.willAcceptPanelView=!1,this.tipOfferedView&&document.getElementById("tipOffered_panel").hideExpansion(),this.tipOfferedView=!1,this.tagsPanelView&&document.getElementById("tags_panel").hideExpansion(),this.tagsPanelView=!1;break;default:console.log(arguments)}}}},B=N,L=(n("986d"),Object(C["a"])(B,V,R,!1,null,"69a495fe",null)),D=L.exports,M=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-ons-page",{attrs:{id:"viewStreamPage"}},[o("v-ons-toolbar",[o("div",{staticClass:"left"},[o("v-ons-back-button",{on:{click:function(t){return t.preventDefault(),e.endViewingStream()}}})],1),o("div",{staticClass:"center"},[o("span",{staticClass:"onsPageTitleStyle"},[e._v("View Stream")])])]),o("v-ons-list",[o("v-ons-list-item",{attrs:{id:"optionsPanel_section_viewStream"}},[o("div",{attrs:{id:"pay-info-section"}},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.isInBuiltRequestDemo(),expression:"isInBuiltRequestDemo()"}],staticClass:"badge badge-warning",attrs:{id:"payingLabel"}},[e._v(" Paying "),o("strong",[o("i",[e._v(e._s(e.PayToUserName))])])]),o("span",{staticClass:"badge badge-pill badge-info",attrs:{id:"payment-ticker"}},[e._v(e._s("NEAR "+e.formattedTotalAmountNear))])]),o("div",{staticClass:"expandable-content"},[o("div",{attrs:{id:"options_panel"}})])])],1),o("div",{attrs:{id:"view-video-panel"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:e.isInBuiltRequestDemo(),expression:"isInBuiltRequestDemo()"}],staticClass:"container"},[o("div",{staticClass:"jumbotron"},[o("video",{attrs:{id:"inBuiltVideoExample",src:n("678e"),playsinline:""}})])]),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.isInBuiltRequestDemo(),expression:"!isInBuiltRequestDemo()"}],staticClass:"container"},[o("div",{staticClass:"jumbotron"},[o("div",{attrs:{id:"video_info"}},[e._v(" Stream will start playing automatically "),o("br"),e._v("when it is live ")]),o("video",{attrs:{id:"remoteVideo",autoplay:"",controls:""}})])])]),o("section",{directives:[{name:"show",rawName:"v-show",value:e.isInBuiltRequestDemo(),expression:"isInBuiltRequestDemo()"}],attrs:{id:"view_stream_nav_buttons_section"}},[o("div",{attrs:{id:"view_stream_nav_buttons_panel"}},[o("v-ons-button",{attrs:{id:"endStreamButton"},on:{click:function(t){return e.endViewingStream()}}},[e._v(" End Stream ")])],1)])],1)},j=[];n("b680"),n("d093"),n("7db0"),n("4160"),n("caad"),n("c975"),n("a15b"),n("a434"),n("b0c0"),n("2532"),n("159b");function q(e){var t=this;for(var n in t.peerconnection_config=null,t.sdp_constraints=null,t.remotePeerConnection=new Array,t.remoteDescriptionSet=new Array,t.iceCandidateList=new Array,t.webSocketAdaptor=null,t.roomName=null,t.videoTrackSender=null,t.audioTrackSender=null,t.playStreamId=new Array,t.micGainNode=null,t.localStream=null,t.isPlayMode=!1,t.debug=!1,t.camera_location="top",t.camera_margin=15,t.camera_percent=15,e)Object.prototype.hasOwnProperty.call(e,n)&&(this[n]=e[n]);if(t.localVideo=document.getElementById(t.localVideoId),t.remoteVideo=document.getElementById(t.remoteVideoId),!("WebSocket"in window))return console.log("WebSocket not supported."),void t.callbackError("WebSocketNotSupported");if("undefined"==typeof navigator.mediaDevices&&0==t.isPlayMode)return console.log("Cannot open camera and mic because of unsecure context. Please Install SSL(https)"),void t.callbackError("UnsecureContext");if(this.getUserMedia=function(e,n){navigator.mediaDevices.getUserMedia(e).then((function(o){var a=o.getAudioTracks();if(a.length>0&&o.removeTrack(a[0]),"undefined"!=e.video&&"undefined"!=typeof e.video.mandatory&&"undefined"!=typeof e.video.mandatory.chromeMediaSource&&"desktop"==e.video.mandatory.chromeMediaSource&&(o.getVideoTracks()[0].onended=function(){t.callback("screen_share_stopped")}),"undefined"!=n&&0!=n){var i={audio:n};navigator.mediaDevices.getUserMedia(i).then((function(e){"undefined"!=t.mediaConstraints&&"screen+camera"==t.mediaConstraints.video?navigator.mediaDevices.getUserMedia({video:!0,audio:!1}).then((function(n){var a=document.createElement("canvas"),i=a.getContext("2d"),r=document.createElement("video");r.srcObject=o,r.play();var s=document.createElement("video");s.srcObject=n,s.play();var c=a.captureStream(15);c.addTrack(e.getAudioTracks()[0]),t.gotStream(c),setInterval((function(){a.width=r.videoWidth,a.height=r.videoHeight,i.drawImage(r,0,0,a.width,a.height);var e,n=r.videoWidth*(t.camera_percent/100),o=s.videoHeight/s.videoWidth*n,c=a.width-n-t.camera_margin;e="top"==t.camera_location?t.camera_margin:a.height-o-t.camera_margin,i.drawImage(s,c,e,n,o)}),66)})).catch((function(e){t.callbackError(e.name,e.message)})):(o.addTrack(e.getAudioTracks()[0]),t.gotStream(o))})).catch((function(e){t.callbackError(e.name,e.message)}))}})).catch((function(e){t.callbackError(e.name,e.message)}))},this.openScreen=function(e){var n=function n(o){if("rtcmulticonnection-extension-loaded"==o.data)console.debug("rtcmulticonnection-extension-loaded parameter is received"),window.postMessage("get-sourceId","*");else if("PermissionDeniedError"==o.data)console.debug("Permission denied error"),t.callbackError("screen_share_permission_denied");else if(o.data&&o.data.sourceId){var a={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o.data.sourceId},optional:[]}};t.getUserMedia(a,e),window.removeEventListener("message",n)}};window.addEventListener("message",n,!1),window.postMessage("are-you-there","*")},this.openStream=function(e){t.mediaConstraints=e;var n=!1;"undefined"!=typeof e.audio&&0!=e.audio&&(n=e.audio),"undefined"!=typeof e.video?"screen+camera"==e.video||"screen"==e.video?this.openScreen(n):t.getUserMedia(e,n):(console.error("MediaConstraint video is not defined"),t.callbackError("media_constraint_video_not_defined"))},this.closeStream=function(){t.localStream.getVideoTracks().forEach((function(e){e.onended=null,e.stop()})),t.localStream.getAudioTracks().forEach((function(e){e.onended=null,e.stop()}))},this.checkExtension=function(){var e=function e(n){"rtcmulticonnection-extension-loaded"==n.data&&(t.callback("screen_share_extension_available"),window.removeEventListener("message",e))};window.addEventListener("message",e,!1),window.postMessage("are-you-there","*")},t.checkExtension(),this.isPlayMode||"undefined"==typeof t.mediaConstraints||null!=this.localStream)null!=t.webSocketAdaptor&&0!=t.webSocketAdaptor.isConnected()||(t.webSocketAdaptor=new a);else if("undefined"!=typeof t.mediaConstraints.video&&0!=t.mediaConstraints.video)t.mediaConstraints.audio.mandatory?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){navigator.mediaDevices.getUserMedia(t.mediaConstraints).then((function(n){var o=new AudioContext,a=o.createGain();a.gain.value=1;var i=o.createMediaStreamDestination(),r=o.createMediaStreamSource(n);r.connect(a),t.micGainNode=o.createGain(),t.micGainNode.gain.value=1;var s=o.createMediaStreamSource(e);s.connect(t.micGainNode),a.connect(i),t.micGainNode.connect(i),n.removeTrack(n.getAudioTracks()[0]),i.stream.getAudioTracks().forEach((function(e){n.addTrack(e)})),console.debug("Running gotStream"),t.gotStream(n)})).catch((function(e){t.callbackError(e.name,e.message)}))})).catch((function(e){t.callbackError(e.name,e.message)})):t.openStream(t.mediaConstraints,t.mode);else{var o={audio:t.mediaConstraints.audio};navigator.mediaDevices.getUserMedia(o).then((function(e){t.gotStream(e)})).catch((function(e){t.callbackError(e.name,e.message)}))}function a(){var e=new WebSocket(t.websocket_url),n=!1,o=-1,a=function(){-1!=o&&(t.debug&&console.debug("Clearing ping message timer"),clearInterval(o),o=-1)},i=function(){e.send;var t={command:"ping"};e.send(JSON.stringify(t))};this.close=function(){e.close()},e.onopen=function(){t.debug&&console.log("websocket connected"),o=setInterval((function(){i()}),5e3),n=!0,t.callback("initialized")},this.send=function(n){0!=e.readyState&&2!=e.readyState&&3!=e.readyState?(e.send(n),console.log("sent message:"+n)):t.callbackError("WebSocketNotConnected")},this.isConnected=function(){return n},e.onmessage=function(e){var n=JSON.parse(e.data);"start"==n.command?(t.debug&&console.debug("received start command"),t.startPublishing(n.streamId)):"takeCandidate"==n.command?(t.debug&&(console.debug("received ice candidate for stream id "+n.streamId),console.debug(n.candidate)),t.takeCandidate(n.streamId,n.label,n.candidate)):"takeConfiguration"==n.command?(t.debug&&console.log("received remote description type for stream id: "+n.streamId+" type: "+n.type),t.takeConfiguration(n.streamId,n.sdp,n.type)):"stop"==n.command?(console.debug("Stop command received"),t.closePeerConnection(n.streamId)):"error"==n.command?t.callbackError(n.definition):"notification"==n.command?(t.callback(n.definition,n),"play_finished"!=n.definition&&"publish_finished"!=n.definition||t.closePeerConnection(n.streamId)):"streamInformation"==n.command?t.callback(n.command,n):"pong"==n.command&&t.callback(n.command)},e.onerror=function(e){console.log(" error occured: "+JSON.stringify(e)),a(),t.callbackError(e)},e.onclose=function(e){n=!1,console.log("connection closed."),a(),t.callback("closed",e)}}this.enableMicInMixedAudio=function(e){null!=t.micGainNode&&(t.micGainNode.gain.value=e?1:0)},this.publish=function(e,n){var o={command:"publish",streamId:e,token:n,video:t.localStream.getVideoTracks().length>0,audio:t.localStream.getAudioTracks().length>0};t.webSocketAdaptor.send(JSON.stringify(o))},this.joinRoom=function(e,n){t.roomName=e;var o={command:"joinRoom",room:e,streamId:n};t.webSocketAdaptor.send(JSON.stringify(o))},this.play=function(e,n,o){t.playStreamId.push(e);var a={command:"play",streamId:e,token:n,room:o};t.webSocketAdaptor.send(JSON.stringify(a))},this.stop=function(e){t.closePeerConnection(e);var n={command:"stop",streamId:e};t.webSocketAdaptor.send(JSON.stringify(n))},this.join=function(e){var n={command:"join",streamId:e};t.webSocketAdaptor.send(JSON.stringify(n))},this.leaveFromRoom=function(e){t.roomName=e;var n={command:"leaveFromRoom",room:e};console.log("leave request is sent for "+e),t.webSocketAdaptor.send(JSON.stringify(n))},this.leave=function(e){var n={command:"leave",streamId:e};t.webSocketAdaptor.send(JSON.stringify(n)),t.closePeerConnection(e)},this.getStreamInfo=function(e){var t={command:"getStreamInfo",streamId:e};this.webSocketAdaptor.send(JSON.stringify(t))},this.gotStream=function(e){t.localStream=e,t.localVideo.srcObject=e,null!=t.webSocketAdaptor&&0!=t.webSocketAdaptor.isConnected()||(t.webSocketAdaptor=new a)},this.switchVideoCapture=function(e){var n={video:!0,audio:!1};t.switchVideoSource(e,n,null)},this.switchDesktopCapture=function(e){var n=function n(o){if("rtcmulticonnection-extension-loaded"==o.data)console.debug("rtcmulticonnection-extension-loaded parameter is received"),window.postMessage("get-sourceId","*");else if("PermissionDeniedError"==o.data)console.debug("Permission denied error"),t.callbackError("screen_share_permission_denied");else if(o.data&&o.data.sourceId){var a={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:o.data.sourceId},optional:[]}};t.switchVideoSource(e,a,(function(){t.callback("screen_share_stopped"),t.switchVideoCapture(e)})),window.removeEventListener("message",n)}};window.addEventListener("message",n,!1),window.postMessage("are-you-there","*")},t.arrangeStreams=function(e,n){var o=t.localStream.getVideoTracks()[0];t.localStream.removeTrack(o),o.stop(),t.localStream.addTrack(e.getVideoTracks()[0]),t.localVideo.srcObject=t.localStream,null!=n&&(e.getVideoTracks()[0].onended=function(e){n(e)})},this.switchVideoSource=function(e,n,o){navigator.mediaDevices.getUserMedia(n).then((function(n){if(null!=t.remotePeerConnection[e]){var a=t.remotePeerConnection[e].getSenders().find((function(e){return"video"==e.track.kind}));a.replaceTrack(n.getVideoTracks()[0]).then((function(){t.arrangeStreams(n,o)})).catch((function(e){console.log(e.name)}))}else t.arrangeStreams(n,o)})).catch((function(e){t.callbackError(e.name)}))},this.onTrack=function(e,n){if(console.log("onTrack"),null!=t.remoteVideo)t.remoteVideo.srcObject!==e.streams[0]&&(t.remoteVideo.srcObject=e.streams[0],console.log("Received remote stream"));else{var o={track:e.streams[0],streamId:n};t.callback("newStreamAvailable",o)}},this.iceCandidateReceived=function(e,n){if(e.candidate){var o={command:"takeCandidate",streamId:n,label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate};t.debug&&(console.log("sending ice candiate for stream Id "+n),console.log(JSON.stringify(e.candidate))),t.webSocketAdaptor.send(JSON.stringify(o))}},this.initPeerConnection=function(e){if(null==t.remotePeerConnection[e]){var n=e;console.log("stream id in init peer connection: "+e+" close dstream id: "+n),t.remotePeerConnection[e]=new RTCPeerConnection(t.peerconnection_config),t.remoteDescriptionSet[e]=!1,t.iceCandidateList[e]=new Array,t.playStreamId.includes(e)||t.remotePeerConnection[e].addStream(t.localStream),t.remotePeerConnection[e].onicecandidate=function(e){t.iceCandidateReceived(e,n)},t.remotePeerConnection[e].ontrack=function(e){t.onTrack(e,n)}}},this.closePeerConnection=function(e){if(null!=t.remotePeerConnection[e]&&"closed"!=t.remotePeerConnection[e].signalingState){t.remotePeerConnection[e].close(),t.remotePeerConnection[e]=null,delete t.remotePeerConnection[e];var n=t.playStreamId.indexOf(e);-1!=n&&t.playStreamId.splice(n,1)}},this.signallingState=function(e){return null!=t.remotePeerConnection[e]?t.remotePeerConnection[e].signalingState:null},this.iceConnectionState=function(e){return null!=t.remotePeerConnection[e]?t.remotePeerConnection[e].iceConnectionState:null},this.gotDescription=function(e,n){t.remotePeerConnection[n].setLocalDescription(e).then((function(){console.debug("Set local description successfully for stream Id "+n);var o={command:"takeConfiguration",streamId:n,type:e.type,sdp:e.sdp};t.debug&&(console.debug("local sdp: "),console.debug(e.sdp)),t.webSocketAdaptor.send(JSON.stringify(o))})).catch((function(e){console.error("Cannot set local description. Error is: "+e)}))},this.turnOffLocalCamera=function(){if(null!=t.remotePeerConnection){var e=t.localStream.getVideoTracks()[0];e.enabled=!1}else this.callbackError("NoActiveConnection")},this.turnOnLocalCamera=function(){if(null!=t.remotePeerConnection){var e=t.localStream.getVideoTracks()[0];e.enabled=!0}else this.callbackError("NoActiveConnection")},this.muteLocalMic=function(){if(null!=t.remotePeerConnection){var e=t.localStream.getAudioTracks()[0];e.enabled=!1}else this.callbackError("NoActiveConnection")},this.unmuteLocalMic=function(){if(null!=t.remotePeerConnection){var e=t.localStream.getAudioTracks()[0];e.enabled=!0}else this.callbackError("NoActiveConnection")},this.takeConfiguration=function(e,n,o){var a=e,i=o,r=n;t.initPeerConnection(a),t.remotePeerConnection[a].setRemoteDescription(new RTCSessionDescription({sdp:r,type:i})).then((function(e){t.debug&&(console.debug("set remote description is succesfull with response: "+e+" for stream : "+a+" and type: "+i),console.debug(r)),t.remoteDescriptionSet[a]=!0;var n=t.iceCandidateList[a].length;console.debug("Ice candidate list size to be added: "+n);for(var o=0;o<n;o++)t.addIceCandidate(a,t.iceCandidateList[a][o]);t.iceCandidateList[a]=[],"offer"==i&&(console.log("try to create answer for stream id: "+a),t.remotePeerConnection[a].createAnswer(t.sdp_constraints).then((function(e){console.log("created answer for stream id: "+a),t.gotDescription(e,a)})).catch((function(e){console.error("create answer error :"+e)})))})).catch((function(e){t.debug&&console.error("set remote description is failed with error: "+e)}))},this.takeCandidate=function(e,n,o){var a=e,i=n,r=o,s=new RTCIceCandidate({sdpMLineIndex:i,candidate:r});t.initPeerConnection(a),1==t.remoteDescriptionSet[a]?t.addIceCandidate(a,s):(console.debug("Ice candidate is added to list because remote description is not set yet"),t.iceCandidateList[a].push(s))},this.addIceCandidate=function(e,n){t.remotePeerConnection[e].addIceCandidate(n).then((function(){t.debug&&console.log("Candidate is added for stream "+e)})).catch((function(t){console.error("ice candiate cannot be added for stream id: "+e+" error is: "+t),console.error(n)}))},this.startPublishing=function(e){var n=e;t.initPeerConnection(n),t.remotePeerConnection[n].createOffer(t.sdp_constraints).then((function(e){t.gotDescription(e,n)})).catch((function(e){console.error("create offer error for stream id: "+n+" error: "+e)}))},this.closeWebSocket=function(){for(var e in t.remotePeerConnection)t.remotePeerConnection[e].close();t.remotePeerConnection=new Array,t.webSocketAdaptor.close()}}var J=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-ons-page",{attrs:{id:"supplyStreamPage"}},[n("v-ons-toolbar",[n("div",{staticClass:"left"},[n("v-ons-back-button",{on:{click:function(t){return t.preventDefault(),e.closeVideoStream(t)}}})],1),n("div",{staticClass:"center"},[e._v("Supply Stream")])]),n("div",{staticClass:"container"},[n("div",{staticClass:"jumbotron"},[n("p",[n("video",{attrs:{id:"localVideo",autoplay:"",muted:"",controls:"",playsinline:""},domProps:{muted:!0}})]),n("v-ons-input",{staticClass:"form-control",attrs:{type:"text",id:"streamName",placeholder:"Type stream name"},model:{value:e.streamNameBox,callback:function(t){e.streamNameBox=t},expression:"streamNameBox"}}),n("p",[n("v-ons-button",{staticClass:"btn btn-info",attrs:{disabled:e.start_publish_button.disabled,id:"start_publish_button"},on:{click:e.startPublishing}},[e._v("Start Publishing")]),n("v-ons-button",{staticClass:"btn btn-info",attrs:{disabled:e.stop_publish_button.disabled,id:"stop_publish_button"},on:{click:e.stopPublishing}},[e._v("Stop Publishing")])],1),n("span",{staticClass:"label label-success",attrs:{id:"broadcastingInfo"}},[e._v("Publishing")])],1)])],1)},U=[],F=n("1157"),W=n.n(F),z={name:"supplyStream",data:function(){return{start_publish_button:{disabled:!0},stop_publish_button:{disabled:!0},screen_share_checkbox:"",install_extension_link:"",streamNameBox:"stream1",streamId:"",name:"",pc_config:"",sdpConstraints:"",mediaConstraints:"",webRTCAdaptor:""}},methods:{closeVideoStream:function(){this.webRTCAdaptor.closeStream(),this.webRTCAdaptor.closePeerConnection(),document.querySelector("ons-navigator").popPage({refresh:!0})},startPublishing:function(){this.streamId=this.streamNameBox,this.webRTCAdaptor.publish(this.streamId)},stopPublishing:function(){this.webRTCAdaptor.stop(this.streamId)},enableDesktopCapture:function(e){1==e?this.webRTCAdaptor.switchDesktopCapture(this.streamId):this.webRTCAdaptor.switchVideoCapture(this.streamId)},startAnimation:function(){var e=this;W()("#broadcastingInfo").fadeIn(800,(function(){W()("#broadcastingInfo").fadeOut(800,(function(){var t=e.webRTCAdaptor.signallingState(e.streamId);if(null!=t&&"closed"!=t){var n=e.webRTCAdaptor.iceConnectionState(e.streamId);null!=n&&"failed"!=n&&"disconnected"!=n&&e.startAnimation()}}))}))}},mounted:function(){var e=this;this.pc_config=null,this.sdpConstraints={OfferToReceiveAudio:!1,OfferToReceiveVideo:!1},this.mediaConstraints={video:!0,audio:!0},this.webRTCAdaptor=new q({websocket_url:"wss://test.antmedia.io:5443/WebRTCAppEE/websocket",mediaConstraints:this.mediaConstraints,peerconnection_config:this.pc_config,sdp_constraints:this.sdpConstraints,localVideoId:"localVideo",debug:!0,callback:function(t,n){"initialized"==t?(console.log("initialized"),e.start_publish_button.disabled=!1,e.stop_publish_button.disabled=!0):"publish_started"==t?(console.log("publish started"),e.start_publish_button.disabled=!0,e.stop_publish_button.disabled=!1,e.startAnimation()):"publish_finished"==t?(console.log("publish finished"),e.start_publish_button.disabled=!1,e.stop_publish_button.disabled=!0):"screen_share_extension_available"==t||("screen_share_stopped"==t?console.log("screen share stopped"):"closed"==t&&"undefined"!=typeof n&&console.log("Connecton closed: "+JSON.stringify(n)))},callbackError:function(e,t){console.log("error callback: "+JSON.stringify(e));var n=JSON.stringify(e);"undefined"!=typeof t&&(n=t),-1!=e.indexOf("NotFoundError")?n="Camera or Mic are not found or not allowed in your device.":-1!=e.indexOf("NotReadableError")||-1!=e.indexOf("TrackStartError")?n="Camera or Mic is being used by some other process that does not not allow these devices to be read.":-1!=e.indexOf("OverconstrainedError")||-1!=e.indexOf("ConstraintNotSatisfiedError")?n="There is no device found that fits your video and audio constraints. You may change video and audio constraints.":-1!=e.indexOf("NotAllowedError")||-1!=e.indexOf("PermissionDeniedError")?n="You are not allowed to access camera and mic.":-1!=e.indexOf("TypeError")?n="Video/Audio is required.":-1!=e.indexOf("UnsecureContext")?n="Fatal Error: Browser cannot access camera and mic because of unsecure context. Please install SSL and access via https":-1!=e.indexOf("WebSocketNotSupported")&&(n="Fatal Error: WebSocket not supported in this browser"),alert(n)}})}},G=z,Q=(n("c519"),Object(C["a"])(G,J,U,!1,null,null,null)),Y=Q.exports,H={name:"viewStream",data:function(){return{webRTCAdaptor:null,streamId1:"streamId",streamId:"stream2",pc_config:null,sdpConstraints:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},mediaConstraints:{video:!1,audio:!1},streamNameBox:"stream1",inBuiltRequest:!0,viewControlPanelView:!1,PayToUserName:"@ma06rii",streamingPaused:!1,metaTag:null,config:null,nearTotalTickerAmount:0}},computed:{formattedTotalAmountNear:function(){return parseFloat(this.nearTotalTickerAmount/Math.pow(10,24)).toFixed(4)}},methods:Object(b["a"])({},Object(r["c"])({_setInBuiltRequestDemo:"setInBuiltRequestDemo"}),{},Object(r["b"])({isInBuiltRequestDemo:"isInBuiltRequestDemo"}),{pauseViewingStream:function(){},playViewingStream:function(){document.getElementById("inBuiltVideoExample").play(),this.streamingPaused=!1},report:function(){},pushToSupplyStreamPage:function(){this.$emit("push-page",Y)},playVideo:function(){document.getElementById("remoteVideo").style.display="block",document.getElementById("remoteVideo").play().then((function(){document.getElementById("play_button").style.display="none"})).catch((function(){document.getElementById("play_button").style.display="block",console.log("User interaction needed to start playing")}))},startPlaying:function(){this.webRTCAdaptor.play(this.streamId)},stopPlaying:function(){this.webRTCAdaptor.stop()},endViewingStream:function(){clearInterval(this.nearPaymentIntervals),this.$emit("back-page")},makeNearPayment:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){var n,o,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="ma06rii",o=window.nearlib.utils.format.parseNearAmount("0.00083333"),console.assert(window.wallet.isSignedIn(),"looks like you need to sign in again with the user account!"),t.prev=3,t.next=6,window.near.account(window.wallet.getAccountId());case 6:return a=t.sent,t.next=9,a.sendMoney(n,o);case 9:i=t.sent,console.log("success!"),console.log(i.transaction.actions[0].Transfer.deposit),e.nearTotalTickerAmount=e.nearTotalTickerAmount+parseInt(i.transaction.actions[0].Transfer.deposit),t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](3),"InvalidTxError::NotEnoughBalance"==t.t0.type&&e.endViewingStream(),console.warn(t.t0.type,t.t0.message);case 19:case"end":return t.stop()}}),t,null,[[3,15]])})))()}}),mounted:function(){var e=this;this.webRTCAdaptor=new q({websocket_url:"wss://test.antmedia.io:5443/WebRTCAppEE/websocket",mediaConstraints:this.mediaConstraints,peerconnection_config:this.pc_config,sdp_constraints:this.sdpConstraints,remoteVideoId:"remoteVideo",isPlayMode:!0,debug:!0,callback:function(t,n){"initialized"==t?(console.log("initialized"),e.webRTCAdaptor.getStreamInfo(e.streamId)):"streamInformation"==t?(console.log("stream information"),e.webRTCAdaptor.play(e.streamId)):"play_started"==t?(console.log("play started"),document.getElementById("video_info").style.display="none",e.playVideo()):"play_finished"==t?(console.log("play finished"),setTimeout((function(){this.webRTCAdaptor.getStreamInfo(this.streamId)}),3e3)):"closed"==t&&"undefined"!=typeof n&&console.log("Connecton closed: "+JSON.stringify(n))},callbackError:function(e){console.log("error callback: "+JSON.stringify(e)),"no_stream_exist"==e&&setTimeout((function(){}),3e3)}}),this.config={networkId:"default",nodeUrl:"https://rpc.nearprotocol.com",walletUrl:"http://wallet.nearprotocol.com",deps:{keyStore:new window.nearlib.keyStores.BrowserLocalStorageKeyStore}},this.isInBuiltRequestDemo()&&(this.makeNearPayment(),this.nearPaymentIntervals=setInterval((function(){e.makeNearPayment()}),3500),this.playViewingStream())},created:function(){},beforeDestroy:function(){}},Z=H,K=(n("3bd0"),Object(C["a"])(Z,M,j,!1,null,null,null)),$=K.exports,X={name:"home",data:function(){return{tabs:[{page:O,key:"Wallet"},{page:A,key:"RequestStream"}],tabbarIndex:1,segmentIndex:1,walletBalance2:0,getSender2:null}},methods:{log:function(){var e;(e=console).log.apply(e,arguments)},pushToFilterStreamPage:function(){this.$emit("push-page",{extends:D,onsNavigatorOptions:{animation:"lift",animationOptions:{duration:.5}}})},pushToViewStreamPage:function(){this.$emit("push-page",$)},popViewPage:function(){this.$emit("back-page")},connectToNear:function(){return Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},reHydrate:function(){var e=this;return Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.near.account(window.wallet.getAccountId());case 2:return e.getSender2=t.sent,t.next=5,e.getSender2.state();case 5:e.walletBalance2=t.sent.amount;case 6:case"end":return t.stop()}}),t)})))()}},created:function(){var e={networkId:"default",nodeUrl:"https://rpc.nearprotocol.com",walletUrl:"http://wallet.nearprotocol.com",deps:{keyStore:new window.nearlib.keyStores.BrowserLocalStorageKeyStore}};Object(p["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,window.nearlib.connect(e);case 2:window.near=t.sent,window.wallet=new window.nearlib.WalletAccount(window.near);case 4:case"end":return t.stop()}}),t)})))(window)},provide:function(){var e=this;return{walletService:function(){return window.nearlib.utils.format.formatNearAmount(e.walletBalance2)}}}},ee=X,te=(n("08e4"),Object(C["a"])(ee,m,f,!1,null,"f5bb3f22",null)),ne=te.exports,oe={name:"login",data:function(){return{}},methods:{loginUser:function(){window.wallet.requestSignIn("","vivid-app-demo")}},mounted:function(){var e=this,t={networkId:"default",nodeUrl:"https://rpc.nearprotocol.com",walletUrl:"http://wallet.nearprotocol.com",deps:{keyStore:new window.nearlib.keyStores.BrowserLocalStorageKeyStore}};Object(p["a"])(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,window.nearlib.connect(t);case 2:return window.near=n.sent,window.wallet=new window.nearlib.WalletAccount(window.near),n.next=6,window.wallet.isSignedIn();case 6:o=n.sent,o&&e.$emit("reset-home-page",ne);case 8:case"end":return n.stop()}}),n)})))(window)}},ae=oe,ie=(n("88de"),Object(C["a"])(ae,d,u,!1,null,"bc11b516",null)),re=ie.exports,se={name:"main_page",data:function(){return{pageStack:[re]}}},ce=se,le=(n("034f"),Object(C["a"])(ce,c,l,!1,null,null,null)),de=le.exports;o["a"].use(i.a),o["a"].config.productionTip=!1,new o["a"]({store:s,render:function(e){return e(de)}}).$mount("#app")},"5fcd":function(e,t,n){},"63bf":function(e,t,n){"use strict";var o=n("d7cc"),a=n.n(o);a.a},"678e":function(e,t,n){e.exports=n.p+"media/santa5.f6f22098.mp4"},"67a2":function(e,t,n){},7280:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAC40lEQVRoge2YzU8TQRjGn1kKlLbQD0EKKTQRJcGAcIDAwXAiUYMkxgMGvSrRxkSP8k/ICQ/o0ZCgHjyIHMCTHCCBCOnBpAKJRdpqBQqEBupux0OrqSKzLfsulbC/484z+z7P7nxlAAODkw1TEzy99daDJAYBXAJQqr8lAMA2OJ9QpOSjuyM9n0RCYYC0+QUALlJ72bMuy8qFey97Vg8SSMLuqS+fL/MA4DKZTI9FAnGA1LDJM1zoQS3AUY15EXZRo1qA/55jH8Ckx0u9dTE0toZRUbkDAIhGbPDPuRFccpDXIg/Q1rmC5rbwH8+qarZQVbOF+ZlqzE55SOuRDiFvXWyf+Uxa2kOoPROjLEkboLH1YPO/aMpCkwukAcpPx9U17h3KknlYhbjq8SsnSAN8/2pV1UQj6ppcIA3gn3OTaHKBNEBwyYH5meoD2z9MV2NlmXYvIN8HZqc8+Bayoak1jPLK1KSORqzwz7nJzQM67cTBZQeCOpj9F8ZZKBPusEA+WwHFewrcbga3FAEAWDwBtrmLgs9rMC1GwWLq+0W2kATgJYVIdJ6D3OAG2P51nttLAHsJlFonEhfrYPoYQdH7RbB4QnNtzQGSFaXYvdYMbivOrgNjkM9XQal1wfx6AVJ0W1N9TXOAl5mxe70le/OZfW3Fqb5lZi0WtAXY62r4Pc4PA7cUYa+rQYsFbQEUr/YLC63vONnLqHXwHZWPQ3Ps/4ARIN8IA3Bg66iMCNgUNQoDMM4nab0ciglRo/gPcAwAWCO1kxvrrEAaEAmEAfpHuwOyrDQD7MVRDqd0rVesQGq//fzyokhLekXwrG9siIP5hCLGhu6MXLlPVZN0FfoStjwARPOGT66GzA8pa9Je0gB4cvONs5BL0wDq/2oK/GDJDt/I1Q3KeuQBAGD4xlg9k9g0AGf60QZP8o7+0e4AdS1dNrL+0e4AZ1IvABmAzJnUq4d53RnuG/cN942LJ7WBgYEmfgKMzs3/59GwxAAAAABJRU5ErkJggg=="},"85ec":function(e,t,n){},"88de":function(e,t,n){"use strict";var o=n("0826"),a=n.n(o);a.a},"89ff":function(e,t,n){"use strict";var o=n("12a1"),a=n.n(o);a.a},"986d":function(e,t,n){"use strict";var o=n("3dcd"),a=n.n(o);a.a},a303:function(e,t,n){},a8c8:function(e,t,n){e.exports=n.p+"img/slim_pin.37d9a318.svg"},c519:function(e,t,n){"use strict";var o=n("67a2"),a=n.n(o);a.a},d7cc:function(e,t,n){}});
//# sourceMappingURL=app.0a1b37ca.js.map